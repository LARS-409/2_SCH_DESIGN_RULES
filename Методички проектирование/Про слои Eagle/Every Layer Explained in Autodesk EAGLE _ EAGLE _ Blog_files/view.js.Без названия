(()=>{"use strict";class t extends HTMLElement{constructor(){super(),this.dependency="https://swc.autodesk.com/web-aem/marketoForm/marketoForm.js"}connectedCallback(){this.id||(this.id=`marketo-${crypto.randomUUID()}`),this.options={targetNode:"#"+this.id,fieldList:this.dataset.fieldlist||"Email",infieldLabels:!1,onSuccess:()=>{this.onSuccess()}};const t=["countryList"];["activityId","activityName","communicationChannel","formId","landingPageId","productInterests"].concat(["bypassMRF","formLang","industryGroup","leadType","submitLabel","selectedCountry","countryList","territorySkill","onSuccessURL","userLanguage"]).forEach((e=>{const s=e.toLowerCase(),n=this.dataset[s];if(n){const s=t.includes(e);this.options[e]=s?JSON.parse(n):n}})),new IntersectionObserver(((t,e)=>{t.forEach((t=>{const s=!!this.offsetParent,n=t.isIntersecting;s&&n&&(e.disconnect(),this.setup())}))})).observe(this)}setup(){this.wp_mktoForm()}wp_mktoForm(){var t;(t=this.dependency,new Promise((function(e,s){const n=document.createElement("script");n.onload=e,n.onerror=s,n.src=t,document.getElementsByTagName("head")[0].appendChild(n)}))).then((()=>{marketoAEM.methods.init(this.options)}))}onSuccess(){const t=this.querySelector("template")||!1;t&&this.appendChild(t.content),this.setAttribute("data-success",!0);const e=new CustomEvent("success",{detail:{message:"Marketo Success",id:this.id}});this.dispatchEvent(e)}}const e=t;var s;s=()=>{customElements.define("adsk-marketo",e)},"loading"!=document.readyState?s():document.addEventListener("DOMContentLoaded",s)})();